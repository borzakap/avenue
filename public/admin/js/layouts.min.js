/*!
 * Borzakap - Idilika Avenue v0.0.1 (https://avenue.idilika.com.ua)
 * Copyright 2021-2021 Borzakap
 */

$(document).ready(function(){$("#section_id").chained("#residential_id"),$("#floor_images_id").chained("#section_id"),$("#floor_images_id").on("change",function(){var a=$(this).data("change-url");$(this).val()||$("#poligon-save-btn").attr("disabled",!0);var e=new FormData;e.set("floor_images_id",$(this).val()),$.ajax({url:a,method:"POST",data:e,processData:!1,contentType:!1,cache:!1,dataType:"json",success:function(a){a.success&&($("#polygon").html($("#polygon").html()),$("#polygon").canvasAreaDraw({imageUrl:a.image}))}})}),$("#poligon_save").on("submit",function(a){a.preventDefault(),$.ajax({url:$(this).attr("action"),method:"POST",data:new FormData(this),processData:!1,contentType:!1,cache:!1,dataType:"json",success:function(a){1==a.success?($("#poligon-alert").show(),$("#poligon-alert").html('<div class="alert alert-success" role="alert">'+a.message+"</div>")):($("#poligon-alert").show(),$("#poligon-alert").html('<div class="alert alert-warning" role="alert">'+a.message+"</div>")),setTimeout(function(){$("#poligon-alert").hide(),$("#poligon-alert").html("")},1e4)}})})});