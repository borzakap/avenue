/*!
 * Borzakap - Idilika Avenue v0.0.1 (https://avenue.idilika.com.ua)
 * Copyright 2021-2021 Borzakap
 */

$(document).ready(function(){function d(e){return document.getElementById(e)}function i(e){var a=d("upload_messages");a.innerHTML=e+a.innerHTML}function u(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"==e.type?"hover":""}function e(e){u(e);for(var a,t,n=e.target.files||e.dataTransfer.files,l={value:0},o=n.length,s=0;a=n[s];s++)a.size>d("upload_max_file_size").value?i("<p class='failure'>Large file - "+a.name+" ("+a.size+" byte)</p>"):(t="|"+a.name.substr(a.name.lastIndexOf(".")+1)+"|",-1!=("|"+d("upload_ext").value+"|").indexOf(t.toLowerCase())?function(e,a,t){var n,l,o,s;0<=location.host.indexOf("sitepointstatic")||((n=new XMLHttpRequest).upload&&e.size>d("upload_max_file_size").value||(l="|"+e.name.substr(e.name.lastIndexOf(".")+1)+"|",o="|"+d("upload_ext").value+"|",n.upload&&-1<o.indexOf(l.toLowerCase())&&((s=d("upload_progress").appendChild(document.createElement("p"))).appendChild(document.createTextNode("Preparing... "+e.name)),n.upload.addEventListener("progress",function(e){s.innerHTML="Uploading "+parseInt(e.loaded/e.total*100)+"% ... please wait..."},!1),n.onreadystatechange=function(e){4==n.readyState&&(s.className=200==n.status?"success item-"+a.value:"failure item-"+a.value,$("#upload_progress p.item-"+a.value).fadeOut(9e3),a.value++,a.value==t&&$.post(d("update_path").value,{dir:"_pages/"+d("page_id").value},function(e){$("#all-files-result").html(e),lbox(),localStorage.clear()})),3==n.readyState&&(s.innerHTML=n.responseText)},n.open("POST",d("upload_action").value,!0),n.setRequestHeader("X-REQUESTED-FILENAME",unescape(encodeURIComponent(e.name))),n.setRequestHeader("X-REQUESTED-FILEUPDIR",unescape(encodeURIComponent(d("page_id").value))),n.setRequestHeader("X-REQUESTED-FILETITLE",unescape(encodeURIComponent(d("image_title").value))),n.send(e))))}(a,l,o):i("<p class='failure'>Forbidden type file - "+a.name+" ("+a.type+")</p>"))}var a,t,n;window.File&&window.FileList&&window.FileReader&&(a=d("upload_fileselect"),t=d("upload_filedrag"),n=d("upload_submitbutton"),a.addEventListener("change",e,!1),(new XMLHttpRequest).upload&&(t.addEventListener("dragover",u,!1),t.addEventListener("dragleave",u,!1),t.addEventListener("drop",e,!1),t.style.display="block",n.style.display="none"))});