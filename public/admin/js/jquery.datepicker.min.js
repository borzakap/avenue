/*!
 * Borzakap - Idilika Avenue v0.0.1 (https://avenue.idilika.com.ua)
 * Copyright 2021-2021 Borzakap
 */

"use strict";!function(t,h){var a=h(t),s=h("body"),i=h("html"),l="jquery-datepicker",o=function(t,e){t=h(t);e=h.isPlainObject(e)?e:{},e={options:h.extend({},o.prototype.DEFAULTS,e),isMobile:i.hasClass("mobile"),$elem:t,$input:t.find(".jquery-datepicker__input"),$panel:null,selectedDate:null,displayMonth:null,isCreated:!1,isShown:!1,isDateSelected:"none"!==e.date},h.extend(this,e),this.init()};o.prototype={constructor:o,DEFAULTS:{lang:"en",date:null,startDate:null,endDate:null,disabledDates:[],format:"ddmmyy",position:"below"},msg:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["MO","TU","WE","TH","FR","SA","SU"]}},init:function(){this.initDateObj(),this.$input.attr("readonly","readonly"),this.isDateSelected&&this.updateInputfield(this.formatDateStr(this.selectedDate)),!0===this.isMobile&&(this.$container=h("<div>").addClass("jquery-datepicker__container").appendTo(s)),this.updateView(this.selectedDate),(!0===this.isMobile?this.$container:this.$panel).addClass("-is--hidden"),this.attachToInput(),this.isCreated=!0},initDateObj:function(){this.selectedDate=this.getDateObj(this.options.date),this.options.startDate&&(this.startDate=this.getDateObj(this.options.startDate)),this.options.endDate&&(this.endDate=this.getDateObj(this.options.endDate))},updateView:function(t){var e=this.getHeader(this.msg[this.options.lang],t),a=this.getContent(this.msg[this.options.lang],t),a=h("<table>").addClass("jquery-datepicker__table").append(e,a);this.isCreated?this.$panel.empty().append(a):this.$panel=h("<div>").addClass("jquery-datepicker__panel").append(a),this.isMobile?this.$panel.addClass("-device--mobile").appendTo(this.$container):this.$panel.appendTo(s),this.adjustPanelPosition(),this.displayMonth=new Date(t.getTime()),this.registerEventHandlers()},getHeader:function(t,e){var a=e.getFullYear(),s=e.getMonth(),i=h("<th>").addClass("jquery-datepicker__prev").append(h("<span>").addClass("fa fa-chevron-left")),e=h("<th>").addClass("jquery-datepicker__next").append(h("<span>").addClass("fa fa-chevron-right")),s=h("<th>").attr("colspan","5").addClass("jquery-datepicker__title").append(h("<span>").text(t.months[s]+" "+a)),a=h("<thead>");return h("<tr>").append(i,s,e).appendTo(a),a},getContent:function(t,e){var a,s,i,n=[],d=e.getFullYear(),l=e.getMonth(),o=h("<tr>");for(t.days.forEach(function(t){o.append(h("<td>").addClass("jquery-datepicker__dayName").append(h("<span>").text(t)))}),0===(a=new Date(d,l,1).getDay())&&(a=7),s=0;s<a-1;s++)n.push(h("<td>").addClass("-is--disabled").append("<span>"));for(s=1;s<=this.getDaysOfMonth(l+1,d);s++)i=h("<td>").addClass("jquery-datepicker__day").append(h("<span>").text(s)),this.isDateSelected&&this.selectedDate.getFullYear()===d&&this.selectedDate.getMonth()===l&&this.selectedDate.getDate()===s&&i.addClass("-is--selected"),this.startDate&&this.startDate.getTime()>new Date(d,l,s).getTime()&&i.addClass("-is--disabled"),this.endDate&&this.endDate.getTime()<new Date(d,l,s).getTime()&&i.addClass("-is--disabled"),n.push(i);for(s=0;s<n.length;s+=7)o=o.add(h("<tr>").append(n.slice(s,s+7)));return o},getDaysOfMonth:function(t,e){return new Date(e,t,0).getDate()},getDateObj:function(t){var e,a,s,i;if(this.isDateSelected&&t&&"string"==typeof t)if("+"===(s=t.charAt(0))||"-"===s)switch(i=parseInt(t.slice(1,-1),10),a=new Date,e=new Date(a.getFullYear(),a.getMonth(),a.getDate()),isNaN(i)&&(i=0),s){case"-":e.setDate(e.getDate()-i);break;case"+":default:e.setDate(e.getDate()+i)}else t=t.split("-"),e=new Date(t[0],parseInt(t[1],10)-1,t[2]);else a=new Date,e=new Date(a.getFullYear(),a.getMonth(),a.getDate());return e},formatDateStr:function(t){var e,a=(t.getFullYear()+"").slice(-2),s=t.getFullYear()+"",i=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);switch(this.options.format){case"yyyymmdd":e=s+"/"+i+"/"+n;break;case"mmddyyyy":e=i+"/"+n+"/"+s;break;case"ddmmyyyy":e=n+"/"+i+"/"+s;break;case"yymmdd":e=a+"/"+i+"/"+n;break;case"mmddyy":e=i+"/"+n+"/"+a;break;case"ddmmyy":default:e=n+"/"+i+"/"+a}return e},registerEventHandlers:function(){var a=this,t=this.$panel.find(".jquery-datepicker__prev"),e=this.$panel.find(".jquery-datepicker__next"),s=this.$panel.find("table td");t.on("click",function(t){t.stopPropagation(),a.displayMonth=new Date(a.displayMonth.getFullYear(),a.displayMonth.getMonth()-1,1),a.updateView(a.displayMonth)}),e.on("click",function(t){t.stopPropagation(),a.displayMonth=new Date(a.displayMonth.getFullYear(),a.displayMonth.getMonth()+1,1),a.updateView(a.displayMonth)}),s.on("click",function(t){var e=h(this);if(t.stopPropagation(),e.hasClass("-is--disabled")||e.hasClass("jquery-datepicker__dayName"))return!1;a.$panel.find(".-is--selected").removeClass("-is--selected"),e.addClass("-is--selected"),a.selectedDate=a.getDateObj(a.displayMonth.getFullYear()+"-"+(a.displayMonth.getMonth()+1)+"-"+e.find("span").text()),a.updateInputfield(a.formatDateStr(a.selectedDate)),a.isDateSelected=!0,a.hide()})},attachToInput:function(){var t=this;this.$input.on("click",function(){t.$input.blur(),!1===t.isShown&&t.show()})},updateInputfield:function(t){this.$input.val(t).trigger("change")},adjustPanelPosition:function(){var t=this.$input.offset();!0===this.isMobile?this.$panel.width(this.$panel.find("table").width()):"below"===this.options.position?(this.$panel.addClass("-position--below").removeClass("-position--above"),this.$panel.css({top:t.top+this.$input.outerHeight(),left:t.left})):(this.$panel.addClass("-position--above").removeClass("-position--below"),this.$panel.css({bottom:a.height()-t.top,left:t.left})),this.$panel.height(this.$panel.find("table").height())},show:function(){var e=this;a.click(function(t){e.$input.is(t.target)||e.$panel.is(t.target)||0!==e.$panel.has(t.target).length||e.hide()}),this.isMobile?this.$container.fadeIn(250,function(){s.css("cursor","pointer"),e.$container.removeClass("-is--hidden")}):this.$panel.fadeIn(250,function(){e.$panel.removeClass("-is--hidden")}),this.adjustPanelPosition(),this.isShown=!0},hide:function(){var t=this;this.isMobile?this.$container.fadeOut(250,function(){s.css("cursor",""),t.$container.addClass("-is--hidden")}):this.$panel.fadeOut(250,function(){t.$panel.addClass("-is--hidden")}),this.isShown=!1},get:function(){return this.isDateSelected?this.selectedDate:null},set:function(t){null===t?(this.isDateSelected=!1,this.selectedDate=this.getDateObj(),this.updateView(this.selectedDate),this.updateInputfield("")):(this.isDateSelected=!0,this.selectedDate=t,this.updateView(this.selectedDate),this.updateInputfield(this.formatDateStr(this.selectedDate)))}},h.fn.datepicker=function(i){var n,d=Array.prototype.slice.call(arguments);return this.each(function(){var t,e=h(this),a=e.data(l),s={date:e.attr("data-selected-date"),startDate:e.attr("data-start-date"),endDate:e.attr("data-end-date"),format:e.attr("data-format")};a||e.data(l,a=new o(this,h.extend({},s,i))),"string"==typeof i&&"function"==typeof(t=a[i])&&(n=t.apply(a,d.slice(1)))}),void 0===n?this:n},h.fn.datepicker.Constructor=o}(window,jQuery);